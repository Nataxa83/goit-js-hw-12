{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst imgApi = axios.create({\n  baseURL: 'https://pixabay.com',\n  });\n\n\nexport async function searchImages(imgKeyWord, page, per_page) {\n \n  try {\n    const res = await imgApi.get('/api/', {\n        params: {\n          key: '44578932-6e2bdfbc9295001d2a495ef0a',\n          q: imgKeyWord,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          per_page: per_page,\n          page: page,\n        }\n    });\n    \n    return res.data;\n    \n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  };\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { refs } from \"../main\"; \n\n\nexport function markupGallery(images) {\n  const markup = images\n    .map(image => {\n      return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n                width=360;\n                height=200;\n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags} \" />\n        </a>\n                <div class=\"image-info\">\n                <p class = \"info-item\"><strong>LIKES:</strong> ${image.likes}</p>\n                <p class = \"info-item\"><strong>VIEWS:</strong> ${image.views}</p>\n                <p class = \"info-item\"><strong>COMMENTS:</strong> ${image.comments}</p>\n                <p class = \"info-item\"><strong>DOWNLOADS: </strong>${image.downloads}</p>\n                </div>\n        </li>\n        `;\n    })\n    .join('');\n  refs.imgGallery.insertAdjacentHTML('beforeend', markup);\n\n}\n\nexport function formReset() {\n  refs.formSearch.reset();\n}\n\nexport function showLoader() {\n    refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    refs.loader.classList.add('hidden');\n}\n\nexport function showLoadMore() {\n    refs.moreBtn.style.display = 'flex';\n}\n\nexport function hideLoadMore() {\n    refs.loader.classList.add('hidden');\n}\n\nexport function checkEndPages(page, maxPage) {\n  if (page >= maxPage) {\n    hideLoadMore();\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The end!',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } else {\n    showLoadMore();\n  }\n}\n\nexport function skipOldElement(x = 0, y = 0) {\n  const liEl = refs.imgGallery.children[0];\n  const height = liEl.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: height * 2,\n    left: y,\n    behavior: 'smooth',\n  });\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchImages } from \"./js/pixabay-api\";\nimport {\n    markupGallery,\n    formReset,\n    showLoader,\n    hideLoader,\n    hideLoadMore,\n    showLoadMore,\n    checkEndPages,\n    skipOldElement,\n} from \"./js/render-functions\";\n\n\nlet imgKeyWord = '';\nlet page = 1;\nlet maxPage = 1;\nconst per_page = 15;\n\nexport const refs = {\n  formSearch: document.querySelector('.form'),\n  inputImgSearch: document.querySelector('.input-search'),\n  imgGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  moreBtn: document.querySelector('.more-button'),\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.formSearch.addEventListener('submit', async event => {\n      event.preventDefault();\n    page = 1;\n    imgKeyWord = refs.inputImgSearch.value.trim();\n    hideLoadMore();\n    if (imgKeyWord === '') {\n         refs.imgGallery.innerHTML = ' ';\n        iziToast.warning({\n            title: 'warning',\n            message: ' Enter a word for the query, please.',\n            layout: 2,\n            position: 'topRight',\n            displayMode: 'once',\n            color: '#ef4000',\n            messageColor: '#fff',\n            messageSize: '16',\n        });\n        formReset();\n        return;\n    }\n    showLoader();\n\n    refs.imgGallery.innerHTML = ' ';\n    \n    \n    try {\n        const data = await searchImages(imgKeyWord, page, per_page)\n        maxPage = Math.ceil(data.totalHits / per_page);\n        if (maxPage === 0) {\n            iziToast.error({\n                title: 'Error',\n                message:\n                'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                displayMode: 'once',\n                color: '#ef4040',\n                messageColor: '#fff',\n                messageSize: '16',\n                layout: 2,\n            });\n            \n            formReset();\n            hideLoader();\n            return;\n        }\n        // hideLoader();\n        formReset();\n        markupGallery(data.hits);\n        showLoader();\n        lightbox.refresh();\n        showLoadMore();\n       \n           }\n    catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: `${error}`,\n            layout: 2,\n            displayMode: 'once',\n            backgroundColor: '#ef4040',\n            progressBarColor: '#B51B1B',\n            position: 'topRight',\n   \n        });\n    };\n\n});\n\nrefs.moreBtn.addEventListener('click', async () => {\n    hideLoadMore();\n    showLoader();\n    \n    try {\n      page++;\n\n    const data = await searchImages(imgKeyWord, page, per_page);\n\n    if (data.hits.length !== 0) {\n        markupGallery(data.hits);\n        lightbox.refresh();\n      hideLoader();\n    }\n    checkEndPages(page, maxPage);\n    skipOldElement();\n  } catch (error) {\n    // refs.imgGallery.innerHTML = ' ';\n\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  }\n});"],"names":["imgApi","axios","searchImages","imgKeyWord","page","per_page","error","iziToast","markupGallery","images","markup","image","refs","formReset","showLoader","hideLoader","showLoadMore","hideLoadMore","checkEndPages","maxPage","skipOldElement","x","y","height","lightbox","SimpleLightbox","event","data"],"mappings":"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"}